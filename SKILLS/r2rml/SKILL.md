---
name: r2rml
description: R2RML 字段-属性匹配技能（两轮：分群 + 群内匹配），以本体属性为锚点，将数据源字段对齐到 TBox 数据属性。
---

# R2RML 匹配技能

## 基础要求
- 先理解数据表结构与字段之间可能的关联，再与本体数据属性进行匹配。
- 以本体数据属性为锚点，为每个属性匹配一个最合适的表字段。
- 只允许使用给定的候选表名与字段名（必须来自输入的表与字段列表）。
- 输出必须为 JSON 格式：`{"matches": [{"property_iri":..., "table_name":..., "field":..., "reason":..., "confidence":...}]}`。
- `reason` 必须简述匹配依据或失败原因。
- `confidence` 必须是 0 到 1 的浮点数，表示匹配置信度；无匹配时为 0。
- 如果没有合适字段，`table_name` 与 `field` 返回 `null`。

## 使用方式
- 以“本体数据属性”为锚点，为每个属性选择一个最合适的表字段。
- 匹配分两轮：先分群，再在群内匹配；匹配失败时才使用游离字段兜底。
- 匹配前统一翻译为英文，后续计算与判断均使用英文名称；输出仍使用原始名称。

## 预处理（统一翻译）
- 将以下名称统一翻译成英文：类名、属性名、表名、字段名。
- 统一英文规范：小写、去除多余符号、空格转下划线（便于子串判断）。
- 翻译仅用于匹配计算，最终输出必须引用原始表名与字段名。

## 分群规则（第一轮）
- 以本体属性为主，对属性进行分群：
  - 若属性自同一个类，则归为一群。
  - 给每个群一个临时群名：优先使用类名。
- 将数据表（或文件）分配到群：
  - 表名/文件名是群名的子串,或群名中所包含的类名是表名/文件名的子串，则该表进入该群。
  - 表名/文件名是群名的近义词,或遵命中所包含的类名是表名/文件名的近义词，也进入该群。

## 匹配规则（第二轮）
- 优先在“群内”完成属性-字段匹配；群内匹配失败才使用“游离字段”。
- 匹配优先级：
  1) 子串优先：若属性名与字段名互为子串，且该“子串”不是属性所属类或父类的名字，则优先匹配。
  2) 同义/近义：若名字不构成子串，但可找到共同同义词或近义词，且该词不是属性所属类或父类名，则匹配。
  3) 差缺补漏：其余情况使用整体语义相似度与样例类型进行补匹配。

## 输出格式
- 输出 JSON：
  - `matches`: 每个属性对应一个匹配项
  - 每个匹配项包含：`property_iri`、`table_name`、`field`、`reason`、`confidence`
- 无匹配则将 `table_name` 与 `field` 设为 `null`。
- `confidence` 为 0 到 1 的浮点数，表示匹配置信度；无匹配时为 0。
